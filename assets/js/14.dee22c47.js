(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{360:function(s,t,a){"use strict";a.r(t);var n=a(43),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"nginx代理vue"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx代理vue"}},[s._v("#")]),s._v(" nginx代理vue")]),s._v(" "),a("h2",{attrs:{id:"一、nginx代理vue的意义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、nginx代理vue的意义"}},[s._v("#")]),s._v(" 一、nginx代理vue的意义")]),s._v(" "),a("p",[s._v("vue打包后,因为开发环境设置代理 "),a("strong",[a("code",[s._v("proxy")])]),s._v(" 的原因, 使得访问打包页面 "),a("strong",[a("code",[s._v("dist/index.html")])]),s._v(" 请求数据出现跨域。"),a("br"),a("br"),s._v("\nnginx代理vue的意义在于把开发环境中的代理 "),a("strong",[a("code",[s._v("proxy: {'/api': ...")])]),s._v(" 的/api, 换成生产环境中的地址。")]),s._v(" "),a("p",[a("br"),a("br")]),s._v(" "),a("h2",{attrs:{id:"二、下载nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、下载nginx"}},[s._v("#")]),s._v(" 二、下载nginx")]),s._v(" "),a("p",[a("a",{attrs:{href:"http://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("nginx官网"),a("OutboundLink")],1),s._v("下载并解压，推荐使用稳定版本（nginx/Windows-1.18.0）\n"),a("img",{attrs:{src:"/docs/assets/images/vue-nginxToVue1.png",alt:"nginx官网"}})]),s._v(" "),a("p",[a("br"),a("br")]),s._v(" "),a("h2",{attrs:{id:"三、vue打包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、vue打包"}},[s._v("#")]),s._v(" 三、vue打包")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v(" npm run build "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 打包文件")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("(默认)生成文件夹 "),a("code",[s._v("dist")])]),s._v(" "),a("p",[a("br"),a("br")]),s._v(" "),a("h2",{attrs:{id:"四、放入nginx中"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、放入nginx中"}},[s._v("#")]),s._v(" 四、放入nginx中")]),s._v(" "),a("p",[s._v("把生成的 "),a("strong",[a("code",[s._v("dist下所有文件")])]),s._v(" 放入压缩后nginx中 "),a("code",[s._v("html")]),s._v(" 文件夹下\n"),a("img",{attrs:{src:"/docs/assets/images/vue-nginxToVue2.png",alt:"放入nginx中"}})]),s._v(" "),a("p",[a("br"),a("br")]),s._v(" "),a("h2",{attrs:{id:"五、配置nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、配置nginx"}},[s._v("#")]),s._v(" 五、配置nginx")]),s._v(" "),a("p",[s._v("进入nginx的 "),a("strong",[a("code",[s._v("conf")])]),s._v(" 文件夹中, 打开 "),a("strong",[a("code",[s._v("nginx.conf")])]),s._v(" 文件进行代理配置\n"),a("img",{attrs:{src:"/docs/assets/images/vue-nginxToVue3.png",alt:"配置nginx"}})]),s._v(" "),a("ul",[a("li",[s._v("默认监听端口为 "),a("strong",[a("code",[s._v("80")])]),s._v(", 可自行更改")]),s._v(" "),a("li",[s._v("默认监听地址为 "),a("strong",[a("code",[s._v("localhost")])]),s._v(", 可自行更改")])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v("server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    listen  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    server_name localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("strong",[s._v("添加代理")])]),s._v(" "),a("ul",[a("li",[s._v("在 "),a("strong",[a("code",[s._v("server")])]),s._v(" 中配置；")]),s._v(" "),a("li",[a("strong",[a("code",[s._v("/api/")])]),s._v(" 为vue中代理的值；")]),s._v(" "),a("li",[a("strong",[a("code",[s._v("proxy_pass")])]),s._v(" 需要代理的IP地址，"),a("strong",[s._v("必填")]),s._v("，其他可忽略")])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v("location "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("api"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    # 可省略开始\n    rewrite  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("api"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("$"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 重定向")]),s._v("\n    proxy_redirect off"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    proxy_set_header Host $host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    proxy_set_header "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("X")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Real"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("IP")]),s._v(" $remote_addr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    proxy_set_header "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("X")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Forwarded"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("For $proxy_add_x_forwarded_for"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    # 可省略结束\n\n    # 必填\n    proxy_pass  http"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/192.168.1.10:8888/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    #node api server 即需要代理的"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("IP")]),s._v("地址\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[a("br"),a("br")]),s._v(" "),a("h2",{attrs:{id:"六、启动nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#六、启动nginx"}},[s._v("#")]),s._v(" 六、启动nginx")]),s._v(" "),a("p",[s._v("双击 **"),a("code",[s._v("nginx.exe")]),s._v("**进行启动（一闪而过，若出现命令行界面，则说明配置有误）\n"),a("img",{attrs:{src:"/docs/assets/images/vue-nginxToVue4.png",alt:"启动nginx"}})]),s._v(" "),a("h2",{attrs:{id:"七、访问打包后的页面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#七、访问打包后的页面"}},[s._v("#")]),s._v(" 七、访问打包后的页面")]),s._v(" "),a("p",[s._v("打开浏览器，访问 "),a("strong",[a("code",[s._v("第五节")])]),s._v(" 设置的地址和端口（此处为localhost:80）"),a("br"),s._v("\n至此，nginx代理vue打包结束。")]),s._v(" "),a("p",[a("br"),a("br"),s._v("\n！！！ 是不是很999")])])}),[],!1,null,null,null);t.default=r.exports}}]);